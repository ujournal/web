---
title: Пост
layout_class: layout-post
---

<form
    class="editor"
    x-data="editor"
    x-bind:data-busy="busy"
    x-on:submit.prevent="submit"
    x-on:input="clearErrors"
    x-on:uploader-started.window="handleUploadStarted"
    x-on:uploader-completed.window="handleUploadCompleted"
    x-on:external-started.window="handleExternalStarted"
    x-on:external-succeed.window="handleExternalCompleted"
    x-on:external-failed.window="handleExternalFailed"
    x-on:external-removed.window="handleExternalRemoved"
    x-on:gallery-started.window="handleGalleryStarted"
    x-on:gallery-succeed.window="handleGallerySucceed"
    x-on:gallery-failed.window="handleGalleryFailed"
>
    <input type="hidden" name="url" x-model="url" />
    <input type="hidden" name="external_id" x-model="external_id" />
    <input type="hidden" name="gallery_id" x-model="gallery_id" />

    <div class="editor-title">
        <input
            type="text"
            class="input"
            x-bind:placeholder="Boolean(url) ? 'Заголовок' : 'Заголовок або URL'"
            autofocus
            minlength="2"
            maxlength="256"
            name="title"
            x-model="title"
            x-on:paste="handleTitlePaste"
            x-on:change="handleTitleChange"
            x-bind:readonly="busy"
        />
        <template x-if="!Boolean(url) || url.startsWith('gallery:')">
            <label
                type="button"
                class="button button-secondary"
                for="uploader-input"
            >
                {% svg icons/photo-up.svg %}
            </label>
        </template>
    </div>

    <div
        x-data="external(url, true)"
        x-on:external-resolve.window="handleResolve"
        x-html="template"
        x-show="Boolean(url) && url.startsWith('https:') && Boolean(data)"
    ></div>

    <div
        x-data="gallery(url, true)"
        x-on:gallery-add.window="handleAdd"
        x-html="template"
        x-show="Boolean(url) && url.startsWith('gallery:') && images.length > 0"
    ></div>

    <!--prettier-ignore-->

    {% include marke.html
        maxlength=5000
        name='body'
        model='body'
        placeholder='Текст...' %}

    <select
        class="input"
        name="feed_id"
        x-model="feed_id"
        x-on:change="handleFeedIdChange"
    >
        <option value="" x-text="`${user.name} (власна стрічка)`"></option>
        <template x-for="feed in feeds">
            <option x-bind:value="feed.id" x-text="feed.name"></option>
        </template>
    </select>

    <template x-if="feeds.find(feed => feed.id == feed_id)?.description">
        <div
            x-text="feeds.find(feed => feed.id == feed_id).description"
            class="editor-description"
        ></div>
    </template>

    <div class="editor-actions">
        <button class="button button-primary">
            {% svg icons/send-2.svg %}
            <span class="button-label">Опублікувати</span>
        </button>
        <button class="button">
            {% svg icons/history.svg %}
            <span class="button-label">Відкласти</span>
        </button>
    </div>
</form>

<!--prettier-ignore-->
{% include popovers/editor_attachment_popover.html %}
{% include uploader.html %}
